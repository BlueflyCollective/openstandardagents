openapi: 3.1.0
info:
  title: Agent Orchestrator API
  version: 1.0.0
  description: Universal agent orchestration service for cross-project coordination
  contact:
    name: OpenAPI AI Agents Standard
    url: https://openapi-ai-agents.org
    email: support@openapi-ai-agents.org
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
  x-openapi-ai-agents-standard:
    version: "0.1.0"
    certification_level: "gold"
    compliance_frameworks: ["ISO_42001", "NIST_AI_RMF", "EU_AI_Act"]
  x-agent-metadata:
    class: "orchestrator"
    protocols: ["openapi", "mcp", "uadp", "a2a"]
    capabilities:
      ["agent_discovery", "capability_matching", "orchestration_planning"]
    domains: ["orchestration", "coordination", "discovery"]
  x-protocol-bridges:
    mcp:
      enabled: true
      latency: "<50ms"
      capabilities: ["tools", "resources", "prompts"]
    a2a:
      enabled: true
      latency: "<35ms"
      capabilities: ["agent_cards", "negotiation"]
    uadp:
      enabled: true
      latency: "<25ms"
      capabilities: ["discovery", "context_sharing"]

servers:
  - url: http://localhost:8080/api/v1
    description: Local development server
  - url: https://orchestrator.openapi-ai-agents.org/api/v1
    description: Production server

paths:
  /orchestrate:
    post:
      operationId: orchestrateAgents
      summary: Orchestrate multiple agents for complex tasks
      description: Coordinate multiple agents across projects to complete complex tasks
      tags:
        - Orchestration
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrchestrationRequest"
      responses:
        "200":
          description: Orchestration completed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrchestrationResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /discover:
    get:
      operationId: discoverAgents
      summary: Discover available agents in workspace
      description: Scan workspace for available agents and their capabilities
      tags:
        - Discovery
      parameters:
        - name: capability
          in: query
          description: Filter agents by capability
          required: false
          schema:
            type: string
        - name: domain
          in: query
          description: Filter agents by domain
          required: false
          schema:
            type: string
      responses:
        "200":
          description: List of discovered agents
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DiscoveryResponse"

  /capabilities:
    get:
      operationId: getCapabilities
      summary: Get workspace capability matrix
      description: Retrieve comprehensive capability matrix across all discovered agents
      tags:
        - Discovery
      responses:
        "200":
          description: Capability matrix
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CapabilityMatrix"

  /health:
    get:
      operationId: healthCheck
      summary: Health check endpoint
      description: Check orchestrator service health and status
      tags:
        - Health
      responses:
        "200":
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthResponse"

components:
  schemas:
    OrchestrationRequest:
      type: object
      required:
        - task
        - requirements
      properties:
        task:
          type: string
          description: Description of the task to be orchestrated
        requirements:
          type: object
          properties:
            capabilities:
              type: array
              items:
                type: string
              description: Required capabilities
            domain:
              type: string
              description: Target domain
            compliance_level:
              type: string
              enum: [bronze, silver, gold]
              description: Required compliance level
        context:
          type: object
          description: Additional context for orchestration

    OrchestrationResponse:
      type: object
      properties:
        orchestration_id:
          type: string
          description: Unique orchestration identifier
        agents:
          type: array
          items:
            $ref: "#/components/schemas/AgentInfo"
        plan:
          $ref: "#/components/schemas/ExecutionPlan"
        status:
          type: string
          enum: [pending, running, completed, failed]
        results:
          type: object
          description: Orchestration results

    AgentInfo:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        capabilities:
          type: array
          items:
            type: string
        status:
          type: string
          enum: [available, busy, offline]

    ExecutionPlan:
      type: object
      properties:
        steps:
          type: array
          items:
            $ref: "#/components/schemas/ExecutionStep"
        estimated_duration:
          type: integer
          description: Estimated duration in seconds

    ExecutionStep:
      type: object
      properties:
        step_id:
          type: string
        agent_id:
          type: string
        action:
          type: string
        dependencies:
          type: array
          items:
            type: string

    DiscoveryResponse:
      type: object
      properties:
        agents:
          type: array
          items:
            $ref: "#/components/schemas/DiscoveredAgent"
        total_count:
          type: integer
        scan_duration_ms:
          type: integer

    DiscoveredAgent:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        project:
          type: string
        capabilities:
          type: array
          items:
            type: string
        compliance_level:
          type: string
          enum: [bronze, silver, gold]
        status:
          type: string
          enum: [active, inactive, error]

    CapabilityMatrix:
      type: object
      properties:
        capabilities:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        domains:
          type: object
          additionalProperties:
            type: array
            items:
              type: string

    HealthResponse:
      type: object
      properties:
        status:
          type: string
          enum: [healthy, degraded, unhealthy]
        timestamp:
          type: string
          format: date-time
        services:
          type: object
          properties:
            discovery:
              type: string
            orchestration:
              type: string
            monitoring:
              type: string
        metrics:
          type: object
          properties:
            active_orchestrations:
              type: integer
            discovered_agents:
              type: integer
            uptime_seconds:
              type: integer

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
        message:
          type: string
        code:
          type: string
        timestamp:
          type: string
          format: date-time

  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: API key for service authentication
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token for user authentication

security:
  - ApiKeyAuth: []
  - BearerAuth: []
