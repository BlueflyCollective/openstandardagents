{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://open-standards-scalable-agents.org/schemas/v0.1.3/extensions/x-ossa-acta.json",
  "title": "OSSA ACTA (Advanced Context Token Architecture) Extension",
  "description": "Token optimization framework for OSSA agents with dynamic placeholders and semantic compression",
  "type": "object",
  "properties": {
    "x-ossa-acta": {
      "type": "object",
      "required": ["tokenOptimization", "compression"],
      "properties": {
        "tokenOptimization": {
          "type": "object",
          "required": ["enabled", "targetReduction", "strategy"],
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable token optimization framework"
            },
            "targetReduction": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0,
              "default": 0.75,
              "description": "Target token reduction percentage (0.75 = 75% reduction)"
            },
            "strategy": {
              "type": "string",
              "enum": ["dynamic_placeholder", "semantic_compression", "hybrid"],
              "default": "hybrid",
              "description": "Token optimization strategy"
            },
            "placeholderSystem": {
              "type": "object",
              "properties": {
                "uniqueTokens": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable {UNIQUE-TOKENS} methodology"
                },
                "dynamicResolution": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable dynamic placeholder resolution"
                },
                "compressionRatio": {
                  "type": "number",
                  "minimum": 1.0,
                  "maximum": 50.0,
                  "default": 10.0,
                  "description": "Target compression ratio (10:1 default)"
                }
              }
            }
          }
        },
        "compression": {
          "type": "object",
          "required": ["type", "vectorStorage"],
          "properties": {
            "type": {
              "type": "string",
              "enum": ["semantic_vector", "differential_context", "hierarchical"],
              "default": "semantic_vector",
              "description": "Compression technique"
            },
            "vectorStorage": {
              "type": "object",
              "required": ["provider", "dimensions"],
              "properties": {
                "provider": {
                  "type": "string",
                  "enum": ["qdrant", "pinecone", "weaviate", "chroma"],
                  "default": "qdrant",
                  "description": "Vector database provider"
                },
                "dimensions": {
                  "type": "integer",
                  "minimum": 128,
                  "maximum": 4096,
                  "default": 1536,
                  "description": "Vector dimensions for embeddings"
                },
                "indexingStrategy": {
                  "type": "string",
                  "enum": ["hnsw", "ivf", "flat"],
                  "default": "hnsw",
                  "description": "Vector indexing strategy"
                }
              }
            },
            "semanticFidelity": {
              "type": "number",
              "minimum": 0.8,
              "maximum": 1.0,
              "default": 0.95,
              "description": "Minimum semantic fidelity preservation target"
            }
          }
        },
        "tokenBudget": {
          "type": "object",
          "properties": {
            "default": {
              "type": "integer",
              "minimum": 1024,
              "maximum": 1000000,
              "default": 4096,
              "description": "Default token budget"
            },
            "maximum": {
              "type": "integer",
              "minimum": 4096,
              "maximum": 2000000,
              "default": 128000,
              "description": "Maximum token budget"
            },
            "emergency": {
              "type": "integer",
              "minimum": 512,
              "maximum": 10000,
              "default": 2048,
              "description": "Emergency fallback token budget"
            },
            "manifest": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "trackingGranularity": {
                  "type": "string",
                  "enum": ["request", "session", "agent"],
                  "default": "session"
                },
                "alertThreshold": {
                  "type": "number",
                  "minimum": 0.5,
                  "maximum": 0.95,
                  "default": 0.8,
                  "description": "Alert when budget usage exceeds threshold"
                }
              }
            }
          }
        },
        "tikTokenizer": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable TikTokenizer integration"
            },
            "model": {
              "type": "string",
              "enum": ["gpt-4", "gpt-3.5-turbo", "claude-3", "claude-sonnet", "universal"],
              "default": "universal",
              "description": "Tokenizer model for accurate counting"
            },
            "caching": {
              "type": "boolean",
              "default": true,
              "description": "Cache token counts for repeated content"
            }
          }
        },
        "performance": {
          "type": "object",
          "properties": {
            "metrics": {
              "type": "object",
              "properties": {
                "trackReduction": {
                  "type": "boolean",
                  "default": true
                },
                "trackLatency": {
                  "type": "boolean",
                  "default": true
                },
                "trackFidelity": {
                  "type": "boolean",
                  "default": true
                }
              }
            },
            "targets": {
              "type": "object",
              "properties": {
                "reductionPercentage": {
                  "type": "number",
                  "minimum": 0.65,
                  "maximum": 0.82,
                  "default": 0.75,
                  "description": "Target 68-82% token reduction"
                },
                "processingLatency": {
                  "type": "integer",
                  "minimum": 10,
                  "maximum": 200,
                  "default": 50,
                  "description": "Maximum processing latency in milliseconds"
                },
                "semanticFidelityMin": {
                  "type": "number",
                  "minimum": 0.95,
                  "maximum": 1.0,
                  "default": 0.98,
                  "description": "Minimum semantic fidelity preservation"
                }
              }
            }
          }
        }
      }
    }
  }
}