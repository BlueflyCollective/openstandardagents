{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://open-standards-scalable-agents.org/schemas/v0.1.6/extensions/x-ossa-coordination.json",
  "title": "OSSA Coordination Extension v0.1.6",
  "description": "Multi-agent coordination, workflow orchestration, and token-efficient routing for OSSA agents",
  "type": "object",
  "properties": {
    "x-ossa-coordination": {
      "type": "object",
      "required": ["multiAgentWorkflows", "smartRouting"],
      "properties": {
        "multiAgentWorkflows": {
          "type": "object",
          "required": ["enabled", "executionModes"],
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable multi-agent workflow coordination"
            },
            "executionModes": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["sequential", "parallel", "adaptive"]
              },
              "default": ["sequential", "parallel", "adaptive"],
              "description": "Supported workflow execution patterns"
            },
            "maxConcurrentAgents": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 8,
              "description": "Maximum agents that can execute concurrently"
            },
            "workflowTimeout": {
              "type": "integer",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 300000,
              "description": "Default workflow timeout in milliseconds"
            },
            "retryPolicy": {
              "type": "object",
              "properties": {
                "maxRetries": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 10,
                  "default": 3
                },
                "backoffStrategy": {
                  "type": "string",
                  "enum": ["linear", "exponential", "fixed"],
                  "default": "exponential"
                }
              }
            }
          }
        },
        "smartRouting": {
          "type": "object",
          "required": ["capabilityMatching", "loadBalancing"],
          "properties": {
            "capabilityMatching": {
              "type": "boolean",
              "default": true,
              "description": "Route tasks based on agent capabilities"
            },
            "loadBalancing": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "strategy": {
                  "type": "string",
                  "enum": ["round_robin", "least_connections", "weighted", "capability_based"],
                  "default": "capability_based"
                },
                "healthCheck": {
                  "type": "boolean",
                  "default": true
                }
              }
            },
            "failoverSupport": {
              "type": "boolean",
              "default": true,
              "description": "Enable automatic failover to backup agents"
            },
            "routingAlgorithm": {
              "type": "string",
              "enum": ["complexity_based", "cost_optimized", "latency_optimized", "hybrid"],
              "default": "hybrid",
              "description": "Algorithm for selecting optimal agent"
            }
          }
        },
        "contextSharing": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable context sharing between agents"
            },
            "vectorCompression": {
              "type": "boolean",
              "default": true,
              "description": "Use vector compression for context storage"
            },
            "persistenceDurations": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["session", "1h", "24h", "7d", "30d"]
              },
              "default": ["session", "1h", "24h", "7d", "30d"],
              "description": "Available context persistence durations"
            },
            "crossAgentContext": {
              "type": "boolean",
              "default": true,
              "description": "Allow context sharing across different agent types"
            },
            "compressionLevel": {
              "type": "string",
              "enum": ["light", "standard", "aggressive"],
              "default": "standard",
              "description": "Context compression level"
            },
            "semanticFidelity": {
              "type": "number",
              "minimum": 0.8,
              "maximum": 1.0,
              "default": 0.95,
              "description": "Minimum semantic fidelity for compressed contexts"
            }
          }
        },
        "tokenOptimization": {
          "type": "object",
          "properties": {
            "coordinationOverhead": {
              "type": "number",
              "minimum": 0.01,
              "maximum": 0.2,
              "default": 0.05,
              "description": "Acceptable token overhead for coordination (5% default)"
            },
            "budgetAllocation": {
              "type": "object",
              "properties": {
                "strategy": {
                  "type": "string",
                  "enum": ["equal", "priority_based", "load_based", "capability_based"],
                  "default": "capability_based"
                },
                "emergencyReserve": {
                  "type": "number",
                  "minimum": 0.05,
                  "maximum": 0.3,
                  "default": 0.1,
                  "description": "Emergency token reserve as percentage of total budget"
                },
                "reallocationInterval": {
                  "type": "integer",
                  "minimum": 60000,
                  "maximum": 3600000,
                  "default": 300000,
                  "description": "Budget reallocation interval in milliseconds"
                }
              }
            },
            "costMonitoring": {
              "type": "object",
              "properties": {
                "trackPerAgent": {
                  "type": "boolean",
                  "default": true
                },
                "trackPerWorkflow": {
                  "type": "boolean",
                  "default": true
                },
                "alertThresholds": {
                  "type": "object",
                  "properties": {
                    "budgetExceeded": {
                      "type": "number",
                      "minimum": 0.8,
                      "maximum": 0.99,
                      "default": 0.9
                    },
                    "inefficiencyDetected": {
                      "type": "number",
                      "minimum": 0.3,
                      "maximum": 0.7,
                      "default": 0.5,
                      "description": "Alert if optimization falls below this threshold"
                    }
                  }
                }
              }
            }
          }
        },
        "monitoring": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable coordination system monitoring"
            },
            "metricsCollection": {
              "type": "object",
              "properties": {
                "performance": {
                  "type": "boolean",
                  "default": true
                },
                "tokenUsage": {
                  "type": "boolean", 
                  "default": true
                },
                "errorRates": {
                  "type": "boolean",
                  "default": true
                },
                "workflowAnalytics": {
                  "type": "boolean",
                  "default": true
                }
              }
            },
            "healthChecks": {
              "type": "object",
              "properties": {
                "interval": {
                  "type": "integer",
                  "minimum": 5000,
                  "maximum": 300000,
                  "default": 30000,
                  "description": "Health check interval in milliseconds"
                },
                "timeout": {
                  "type": "integer",
                  "minimum": 1000,
                  "maximum": 30000,
                  "default": 5000,
                  "description": "Health check timeout in milliseconds"
                },
                "failureThreshold": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10,
                  "default": 3,
                  "description": "Consecutive failures before marking agent unhealthy"
                }
              }
            }
          }
        },
        "security": {
          "type": "object",
          "properties": {
            "authentication": {
              "type": "object",
              "properties": {
                "required": {
                  "type": "boolean",
                  "default": true
                },
                "methods": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": ["api_key", "jwt", "mutual_tls", "oauth2"]
                  },
                  "default": ["api_key", "jwt"]
                }
              }
            },
            "authorization": {
              "type": "object",
              "properties": {
                "rbac": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable role-based access control"
                },
                "agentPermissions": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enforce per-agent permission boundaries"
                }
              }
            },
            "audit": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "logLevel": {
                  "type": "string",
                  "enum": ["minimal", "standard", "comprehensive"],
                  "default": "standard"
                }
              }
            }
          }
        },
        "compliance": {
          "type": "object",
          "properties": {
            "frameworks": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["iso_42001", "nist_ai_rmf", "ossa_v0.1.6", "soc2", "gdpr"]
              },
              "default": ["iso_42001", "nist_ai_rmf", "ossa_v0.1.6"],
              "description": "Supported compliance frameworks"
            },
            "dataGovernance": {
              "type": "object",
              "properties": {
                "dataRetention": {
                  "type": "string",
                  "enum": ["24h", "7d", "30d", "90d", "1y"],
                  "default": "30d"
                },
                "encryption": {
                  "type": "object",
                  "properties": {
                    "inTransit": {
                      "type": "boolean",
                      "default": true
                    },
                    "atRest": {
                      "type": "boolean",
                      "default": true
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}