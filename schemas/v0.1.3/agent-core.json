{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://open-standards-scalable-agents.org/schemas/v0.1.6/agent-core.json",
  "title": "OSSA Core Agent Schema v0.1.6",
  "description": "Core level OSSA agent specification for basic interoperability with enhanced security and framework support",
  "type": "object",
  "required": ["apiVersion", "kind", "metadata", "spec"],
  "properties": {
    "apiVersion": {
      "type": "string",
      "const": "open-standards-scalable-agents/v0.1.6",
      "description": "OSSA API version"
    },
    "kind": {
      "type": "string",
      "const": "Agent",
      "description": "Resource type"
    },
    "metadata": {
      "type": "object",
      "required": ["name", "version"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "description": "Agent identifier (DNS-1123 compliant)"
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9]+)?$",
          "description": "Semantic version"
        },
        "namespace": {
          "type": "string",
          "default": "default",
          "description": "Agent namespace"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description"
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "properties": {
            "tier": {
              "type": "string",
              "enum": ["core", "governed", "advanced"],
              "description": "OSSA conformance tier"
            },
            "domain": {
              "type": "string",
              "description": "Agent domain/specialty"
            },
            "framework": {
              "type": "string",
              "description": "Primary framework"
            }
          }
        },
        "annotations": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "properties": {
            "ossa.io/conformance-level": {
              "type": "string",
              "enum": ["core", "governed", "advanced"],
              "default": "core"
            },
            "ossa.io/migration-date": {
              "type": "string",
              "format": "date"
            },
            "ossa.io/source-format": {
              "type": "string",
              "description": "Original agent format"
            },
            "ossa.io/security-level": {
              "type": "string",
              "enum": ["basic", "enhanced", "enterprise"],
              "default": "basic"
            }
          }
        }
      }
    },
    "spec": {
      "type": "object",
      "required": ["agent", "capabilities"],
      "properties": {
        "agent": {
          "type": "object",
          "required": ["name", "expertise"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Human-readable agent name"
            },
            "expertise": {
              "type": "string",
              "description": "Agent expertise and domain knowledge"
            },
            "description": {
              "type": "string",
              "description": "Detailed agent description"
            },
            "personality": {
              "type": "string",
              "description": "Agent personality traits"
            }
          }
        },
        "capabilities": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Capability identifier"
              },
              "description": {
                "type": "string",
                "description": "Capability description"
              },
              "input_schema": {
                "type": "object",
                "description": "JSON Schema for input validation"
              },
              "output_schema": {
                "type": "object",
                "description": "JSON Schema for output validation"
              },
              "timeout_ms": {
                "type": "integer",
                "minimum": 1000,
                "maximum": 300000,
                "default": 30000,
                "description": "Timeout in milliseconds"
              },
              "streaming": {
                "type": "boolean",
                "default": false,
                "description": "Support for streaming responses"
              }
            }
          }
        },
        "frameworks": {
          "type": "object",
          "properties": {
            "mcp": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "tools": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "langchain": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "tools": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "crewai": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "role": {
                  "type": "string"
                }
              }
            },
            "openai": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "functions": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  }
                }
              }
            },
            "anthropic": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "tools": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "security": {
          "type": "object",
          "properties": {
            "authentication": {
              "type": "string",
              "enum": ["none", "api_key", "oauth2", "jwt", "mfa"],
              "default": "api_key"
            },
            "authorization": {
              "type": "string",
              "enum": ["none", "rbac", "abac", "policy"],
              "default": "rbac"
            },
            "audit_logging": {
              "type": "boolean",
              "default": true
            },
            "data_classification": {
              "type": "string",
              "enum": ["public", "internal", "confidential", "restricted"],
              "default": "internal"
            },
            "encryption": {
              "type": "object",
              "properties": {
                "in_transit": {
                  "type": "boolean",
                  "default": true
                },
                "at_rest": {
                  "type": "boolean",
                  "default": true
                }
              }
            }
          }
        },
        "protocols": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["openapi", "mcp", "grpc", "http", "websocket"]
          }
        },
        "api": {
          "type": "object",
          "properties": {
            "specification": {
              "type": "string",
              "description": "Path to OpenAPI specification"
            },
            "base_url": {
              "type": "string",
              "format": "uri",
              "description": "Base URL for API endpoints"
            },
            "endpoints": {
              "type": "object",
              "description": "API endpoint definitions"
            }
          }
        },
        "resources": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": ["dataset", "model", "document", "service"]
              },
              "uri": {
                "type": "string",
                "format": "uri"
              },
              "access": {
                "type": "string",
                "enum": ["read", "write", "admin"]
              }
            }
          }
        }
      }
    }
  }
}
